/// Menu
import Metismenu from "metismenujs";
import React, { Component, useContext, useEffect } from "react";
/// Scroll
import PerfectScrollbar from "react-perfect-scrollbar";
/// Link
import { Link } from "react-router-dom";
//import { Dropdown } from "react-bootstrap";
import useScrollPosition from "use-scroll-position";
import { ThemeContext } from "../../../context/ThemeContext";
//import LogoutPage from './Logout';



class MM extends Component {
  componentDidMount() {
    this.$el = this.el;
    this.mm = new Metismenu(this.$el);
  }
  componentWillUnmount() {
  }
  render() {
    return (
      <div className="mm-wrapper">
        <ul className="metismenu" ref={(el) => (this.el = el)}>
          {this.props.children}
        </ul>
      </div>
    );
  }
}

const SideBar = () => {
  const {
    iconHover,
    sidebarposition,
    headerposition,
    sidebarLayout,
  } = useContext(ThemeContext);

  let scrollPosition = useScrollPosition();
  /// Path
  let path = window.location.pathname;
  path = path.split("/");
  path = path[path.length - 1];
  /// Active menu
  let deshBoard = ["", "admin", "dashboard"]
  let careers = ["admin/jobs","admin/applicants"]
  let jobs = ["admin/jobs"]
  let applicants = ["admin/applicants"]


  useEffect(() => {
    var btn = document.querySelector(".nav-control");
    var aaa = document.querySelector("#main-wrapper");
    function toggleFunc() {
      return aaa.classList.toggle("menu-toggle");
    }
    btn.addEventListener("click", toggleFunc);
    //sidebar icon Heart blast

  }, []);
  return (
    <div
      className={`dlabnav ${iconHover} ${sidebarposition.value === "fixed" &&
        sidebarLayout.value === "horizontal" &&
        headerposition.value === "static"
        ? scrollPosition > 120
          ? "fixed"
          : ""
        : ""
        }`}
    >
      <PerfectScrollbar className="dlabnav-scroll">

        <MM className="metismenu" id="menu">

          <li className={`${deshBoard.includes(path) ? "mm-active" : ""}`}>
            <Link to="/admin/dashboard" className="ai-icon" >
              <i className="fas fa-home"></i>
              <span className="nav-text">Home</span>
            </Link>
          </li>
          <li className={`${careers.includes(path) ? "mm-active" : ""}`}>
            <Link to="/admin/#" className="has-arrow ai-icon" >
              <i className="fas fa-info-circle"></i>
              <span className="nav-text">Careers</span>
            </Link>
            <ul >
              <li><Link className={`${path === "jobs" ? "mm-active" : ""}`} to="/admin/jobs">Jobs</Link></li>
              <li><Link className={`${path === "applicants" ? "mm-active" : ""}`} to="/admin/applicants">Applicants</Link></li>
            </ul>
          </li>
        </MM>
        <div className="copyright" style={{ "bottom": "0" }}>
          <p><strong>XYZ</strong> Â© 2023 All Rights Reserved</p>
        </div>
      </PerfectScrollbar>
    </div>
  );
};

export default SideBar;
